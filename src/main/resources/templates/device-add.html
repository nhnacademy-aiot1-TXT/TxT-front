<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" type="image/png" href="/img/TxT-Title-Image.jpeg">
    <title>
        장치 추가
    </title>
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet"/>
    <!-- Nucleo Icons -->
    <link href="/css/nucleo-icons.css" rel="stylesheet"/>
    <link href="/css/nucleo-svg.css" rel="stylesheet"/>
    <!-- Font Awesome Icons -->
    <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
    <link href="/css/nucleo-svg.css" rel="stylesheet"/>
    <!-- CSS Files -->
    <link id="pagestyle" href="/css/argon-dashboard.css?v=2.0.4" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <script th:inline="javascript">const accessToken = [[${accessToken}]];</script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/static/js/device-add/card.js"></script>
    <script>
        var currentPage = 0;

        function showPage(index) {
            var pages = document.getElementsByClassName("page");
            pages[currentPage].classList.remove("active");
            currentPage = index;
            pages[currentPage].classList.add("active");
            document.getElementById("prevButton").disabled = currentPage == 0;
            document.getElementById("nextButton").disabled = currentPage == pages.length - 1;
        }

        function prevPage() {
            if (currentPage > 0) showPage(currentPage - 1);
        }

        function nextPage() {
            if (currentPage < document.getElementsByClassName("page").length - 1) showPage(currentPage + 1);
        }

        window.onload = function () {
            showPage(0);
        }
    </script>

    <style>
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
    </style>
</head>

<body class="g-sidenav-show bg-gray-100">
<aside th:replace="fragments/sidebar"></aside>
<div class="main-content card position-relative text-center" id="main-body" style="padding-left: 10px; width: 50%; margin: 0 auto;">
    <div th:replace="fragments/nav"></div>

    <h2 style="margin-bottom: 25px; margin-top: 25px;">Class A</h2>
    <form action="/submitRuleInfo" method="post" class="px-4 py-3">


        <div class="page active">
            <div class="form-group">
                <label for="place">장소</label>
                <select id="place" name="place" class="form-control">
                    <option value="Class A">Class A</option>
                    <option value="Class B">Class B</option>
                    <option value="Lobby">Lobby</option>
                </select>
            </div>
            <div class="form-group">
                <label for="deviceName">추가할 장치 이름</label>
                <select id="deviceName" name="deviceName" class="form-control">
                    <option value="에어컨">에어컨</option>
                    <option value="조명">조명</option>
                    <option value="공기 청정기">공기 청정기</option>
                </select>
            </div>
            <div class="form-group">
                <label for="occupancyCheckRequired">재실 필요 유무</label>
                <select id="occupancyCheckRequired" name="occupancyCheckRequired" class="form-control">
                    <option value="true">예</option>
                    <option value="false">아니오</option>
                </select>
            </div>
        </div>

        <div class="page">
            <h2>AI 모드 설정</h2>
            <div id="aiModesContainer"></div>

            <button type="button" onclick="createAiModeGroup()">AI Mode 추가</button>
            <div>
                <label for="ai_time">메세지 보내는 간격</label>
                <input type="time" id="ai_time" name="ai_time" min="00:01" max="00:10" step="60" class="form-control">
                <input type="hidden" id="localTime" name="localTime">
            </div>
        </div>

        <!-- This is page 3 -->
        <div class="page">
            <h2>커스텀 모드 설정</h2>
            <div id="conditionsContainer"></div>

            <button type="button" onclick="createConditionGroup()">Condition 추가</button>
            <div class="form-group">
                <label for="hours">Hours</label>
                <input type="number" id="hours" min="0" max="23">

                <label for="minutes">Minutes</label>
                <input type="number" id="minutes" min="0" max="59">
            </div>

            <input type="hidden" id="custom_localTime" name="custom_localTime">
        </div>

        <div class="d-flex justify-content-between">
            <button id="prevButton" type="button" onclick="prevPage()">이전</button>
            <button id="nextButton" type="button" onclick="nextPage()">다음</button>
        </div>
    </form>
</div>
</body>
</html>

